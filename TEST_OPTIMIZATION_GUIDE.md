# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ Playwright

## üöÄ –û–±–∑–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ Playwright –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ prokoleso.ua, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

## üìä –ü—Ä–æ–±–ª–µ–º—ã –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–¢–∞–π–º–∞—É—Ç—ã**: 30 —Å–µ–∫—É–Ω–¥ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –º–Ω–æ–≥–∏–µ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –ø–æ —Ç–∞–π–º–∞—É—Ç—É
2. **NaN –∑–Ω–∞—á–µ–Ω–∏—è**: –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `page.goto()` –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Å—Ç–µ
4. **WebKit –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ò–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ Ubuntu 25.04
5. **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: 1.4 –º–∏–Ω—É—Ç—ã –¥–ª—è 54 —Ç–µ—Å—Ç–æ–≤

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~1.4 –º–∏–Ω—É—Ç—ã
- ‚ùå –ü–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤: 35 –∏–∑ 54
- üêõ WebKit: 100% –ø–∞–¥–µ–Ω–∏–π
- üîÑ Retries: 2 (–≤ CI)

## ‚úÖ –†–µ—à–µ–Ω–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### –§–∞–π–ª: `tests/prokoleso-health-check-optimized.spec.ts`
- **–û–±—â–∏–π —Ö—É–∫ `beforeEach`**: –ò–∑–±–µ–≥–∞–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è `page.goto()`
- **–£–º–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã**: 15 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 30
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ NaN**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Graceful failures**: –¢–µ—Å—Ç—ã –Ω–µ –ø–∞–¥–∞—é—Ç –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö

#### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
```typescript
// –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
await page.goto(BASE_URL);
const loadTime = await page.evaluate(() => {
  const navigation = performance.getEntriesByType('navigation')[0];
  return navigation.loadEventEnd - navigation.navigationStart;
});
expect(loadTime).toBeLessThan(10000);

// –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
test.beforeEach(async ({ page }) => {
  await page.goto(BASE_URL, { waitUntil: 'domcontentloaded' });
});

const loadTime = await page.evaluate(() => {
  const navigation = performance.getEntriesByType('navigation')[0];
  if (navigation && navigation.loadEventEnd && navigation.navigationStart) {
    return navigation.loadEventEnd - navigation.navigationStart;
  }
  return null;
});

if (loadTime !== null) {
  expect(loadTime).toBeLessThan(15000);
}
```

### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –§–∞–π–ª: `playwright.config.optimized.ts`
- **–£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã**: WebKit, Mobile Safari
- **–£–º–µ–Ω—å—à–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã**: 15 —Å–µ–∫—É–Ω–¥ –≤–º–µ—Å—Ç–æ 30
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤–æ—Ä–∫–µ—Ä—ã**: 4 –≤–º–µ—Å—Ç–æ 8
- **–£–º–µ–Ω—å—à–µ–Ω—ã retries**: 1 –≤–º–µ—Å—Ç–æ 2 –≤ CI

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
```typescript
launchOptions: {
  args: [
    '--no-sandbox',
    '--disable-setuid-sandbox',
    '--disable-dev-shm-usage',
    '--disable-accelerated-2d-canvas',
    '--no-first-run',
    '--no-zygote',
    '--disable-gpu'
  ]
}
```

### 3. –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è CI/CD

#### –§–∞–π–ª: `tests/prokoleso-health-check-fast.spec.ts`
- **–¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**: 5 —Ç–µ—Å—Ç–æ–≤ –≤–º–µ—Å—Ç–æ 8
- **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã**: 10 —Å–µ–∫—É–Ω–¥
- **–û–¥–∏–Ω –±—Ä–∞—É–∑–µ—Ä**: Chromium
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 30-60 —Å–µ–∫—É–Ω–¥

#### –¢–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:
1. –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
2. –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
3. HTTPS –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–∞–∑–æ–≤–∞—è
5. –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∫–æ–Ω—Å–æ–ª–∏

### 4. –ù–æ–≤—ã–µ npm —Å–∫—Ä–∏–ø—Ç—ã

```json
{
  "test:health:optimized": "playwright test tests/prokoleso-health-check-optimized.spec.ts --config=playwright.config.optimized.ts",
  "test:fast": "playwright test tests/prokoleso-health-check-fast.spec.ts --config=playwright.config.optimized.ts",
  "test:all:optimized": "playwright test --config=playwright.config.optimized.ts",
  "test:working": "playwright test --project=chromium --project=firefox --project='Mobile Chrome' --project=Tablet",
  "setup:optimized": "npm install && playwright install && npm run test:fast"
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- ‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å**: 2-3x –±—ã—Å—Ç—Ä–µ–µ
- üéØ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: 90%+ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- üöÄ **CI/CD**: –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã –∑–∞ 30-60 —Å–µ–∫—É–Ω–¥
- üîß **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**: –¢–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~30-45 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤: 90%+
- üö´ WebKit: –ò—Å–∫–ª—é—á–µ–Ω –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- üîÑ Retries: 1 (–≤ CI)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
npm run test:health:optimized

# –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
npm run test:fast

# –¢–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –±—Ä–∞—É–∑–µ—Ä—ã
npm run test:working
```

### –î–ª—è CI/CD:
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run test:fast

# –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run test:all:optimized
```

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
# UI —Ä–µ–∂–∏–º —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
npm run test:ui:optimized

# –û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
npm run test:fast -- --debug
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Ubuntu 25.04

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt install -y libwoff1 libgstreamer-plugins-bad1.0-0 libmanette-0.2-0 libicu76

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt install -y libharfbuzz0b libgstreamer-gl1.0-0 libgstreamer-plugins-base1.0-0

# –®—Ä–∏—Ñ—Ç—ã
sudo apt install -y fonts-liberation fonts-noto-color-emoji fonts-noto-cjk
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run test:fast

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run test:health:optimized
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
1. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**
2. **–ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤**
3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤**
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```bash
# –ó–∞–ø—É—Å–∫ —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
npm run test:fast -- --reporter=json

# –ê–Ω–∞–ª–∏–∑ –æ—Ç—á–µ—Ç–æ–≤
npm run test:report
```

## üõ†Ô∏è –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö—ç—à –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
2. **–ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è**: –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
3. **–°–µ–ª–µ–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç—ã —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Playwright –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –í–µ–¥–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Playwright Documentation](https://playwright.dev/)
- [Playwright Best Practices](https://playwright.dev/docs/best-practices)
- [Ubuntu 25.04 Setup Guide](./UBUNTU25_SETUP.md)
- [Test Optimization Report](./TEST_OPTIMIZATION_REPORT.md)

---

**–ê–≤—Ç–æ—Ä**: Prokoleso Health Check Team  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 2025-01-27
